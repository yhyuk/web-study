<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            text-align: center;
        }

        #tbl1 {
		    border: 1px solid black;
		    border-collapse: collapse;
            margin: 0 auto;
            margin-top: 10px;
        }
        #tbl1 td {
            border: 1px solid black;
            width: 120px;
            height: 120px;
        }
        #tbl1 td img {
            display: block;
            width: 120px;
            height: 120px;
        }
    </style>
</head>
<body>
    <h1>발자국 ver. 클릭</h1>
    <div>발자국이 눌려진 곳은 점점 흙이 쌓인다.</div>
    <div>더러워진 칸은 더이상 누를 수 없다.(이벤트 해제)</div>
    <table id="tbl1">
		<tr>
			<td class="cell" data-color="255"></td>
			<td class="cell" data-color="255"></td>
			<td class="cell" data-color="255"></td>
		</tr>
		<tr>
			<td class="cell" data-color="255"></td>
			<td class="cell" data-color="255"></td>
			<td class="cell" data-color="255"></td>
		</tr>
		<tr>
			<td class="cell" data-color="255"></td>
			<td class="cell" data-color="255"></td>
			<td class="cell" data-color="255"></td>
		</tr>
	</table>

    <script>
        var cell = document.getElementsByClassName('cell');

        
        for (var i=0; i<cell.length; i++) {
            cell[i].onclick = function() {
                if (event.srcElement.nodeName == "TD") {

                    for(var j=0; j<cell.length; j++) {
                        cell[j].innerHTML = "";
                    }

                    var c = parseInt(event.srcElement.dataset["color"]);
                    c -= 25; // 색변화: 255 -> 25씩 마이너스

                    if (c >= 0) {
                        event.srcElement.style.backgroundColor = "rgb(" + c + "," + c + "," + c + ")";
                        event.srcElement.dataset["color"] = c;
                    } else {
                        event.srcElement.onclick = null;
                    }

                    event.srcElement.innerHTML = "<img src='../images/dog-foot.png'>";
                }
            };
        }
    </script>

</body>
</html>